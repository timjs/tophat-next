% !TEX root=main.tex


%% Language %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newmacro{G-Expressions}{
  \begin{grammar}
    Expressions
      & e    &::= & \lambda x:\tau.\ e   & – abstraction \\
      &      &\mid& e_1\ e_2             & – application \\
      &      &\mid& x                    & – variable \\
      &      &\mid& s                    & – symbol \\
      &      &\mid& l                    & – location \\
      &      &\mid& c                    & – constant \\
    \addlinespace
      &      &\mid& u\ e_1               & – unary operation \\
      &      &\mid& e_1\ o\ e_2          & – binary operation \\
      &      &\mid& \If{e_1}{e_2}{e_3}   & – conditional \\
    \addlinespace
      &      &\mid& \unit                & – unit \\
      &      &\mid& \tuple{e_1, e_2}     & – pair \\
      &      &\mid& \Fst e               & – first projection \\
      &      &\mid& \Snd e               & – second projection \\
    \addlinespace
      &      &\mid& [\ ]_\beta           & – nil \\
      &      &\mid& e_1 :: e_2           & – cons \\
      &      &\mid& \Head e              & – list head \\
      &      &\mid& \Tail e              & – list tail \\
    \addlinespace
      &      &\mid& p                    & – pretask \\
    \addlinespace
    Constants
      & c    &::= & B                    & – boolean \\
      &      &\mid& I                    & – integer \\
      &      &\mid& S                    & – string \\
  \end{grammar}
}

\newmacro{G-Operations}{
  \begin{grammar}
    Unary operations
      & u    &::= & \lnot                & – not \\
      &      &\mid& -                    & – negate \\
      &      &\mid& \Len                 & – length \\
      &      &\mid& \Uniq                & – unique \\
    \addlinespace
    Binary operations
      & o    &::= & \land \Mid \lor                                     & – logical \\
      &      &\mid& < \Mid \le \Mid \equiv \Mid \nequiv \Mid \ge \Mid > & – equational \\
      &      &\mid& + \Mid - \Mid \times \Mid /                         & – numerical \\
      &      &\mid& \pp \Mid \in                                        & – append, element \\
  \end{grammar}
}

\newmacro{G-Pretasks}{
  \begin{grammar}
    Pretasks
      & p    &::= & \Enter \beta         & – unvalued editor \\
      &      &\mid& \Update e            & – valued editor \\
      &      &\mid& \View e              & – valued read-only editor \\
      &      &\mid& \Pick \set{\more{L_i \mapsto e_i}}  & – user choice \\
    \addlinespace
      &      &\mid& e_1 \Pair e_2        & – pairing \\
      &      &\mid& \Done e              & – internal value \\
      &      &\mid& e_1 \Choose e_2      & – choice \\
      &      &\mid& \Fail                & – fail task \\
    \addlinespace
      &      &\mid& e_1 \Trans e_2       & – transform \\
      &      &\mid& e_1 \Step e_2        & – step \\
      &      &\mid& \Forever e           & – forever running task \\
    \addlinespace
      &      &\mid& \Share\ e            & – new shared value \\
      &      &\mid& e_1 := e_2           & – assignment \\
      &      &\mid& \Change e            & – shared editor \\
      &      &\mid& \Watch e             & – shared read-only editor \\
  \end{grammar}
}

\newmacro{G-Types}{
  \begin{grammar}
    Types
      & \tau &::= & \tau_1 \to \tau_2    & – function type \\
      &      &\mid& \Reference \tau      & – reference type \\
      &      &\mid& \Task \tau           & – task type \\
      &      &\mid& \Void                & – void type \\
      &      &\mid& \Unit                & – unit type \\
      &      &\mid& \tau_1 \times \tau_2 & – product type \\
      &      &\mid& \List \tau           & – list type\\
      &      &\mid& \pi                  & – primitive type \\
    \addlinespace
    Primitive types
      & \pi  &\mid& \Bool                & – boolean type \\
      &      &\mid& \Int                 & – integer type \\
      &      &\mid& \String              & – string type \\
    \addlinespace
    Basic types
      & \beta &::= & \Unit                  & – unit type \\
      &       &\mid& \beta_1 \times \beta_2 & – product type \\
      &       &\mid& \List \beta            & – list type\\
      &       &\mid& \pi                    & – primitive type \\
  \end{grammar}
}

\newmacro{G-Values}{
  \begin{grammar}
    Values
      & v    &::= & \lambda x:\tau.\ e   & – abstraction \\
      &      &\mid& l                    & – location \\
      &      &\mid& s                    & – symbol \\
      &      &\mid& b                    & – basic value \\
    % \addlinespace
      % &      &\mid& u\ v                 & – symbolic unary operation \\
      % &      &\mid& v_1\ o\ v_2          & – symbolic binary operation \\
      &      &\mid& t                    & – task \\
    \addlinespace
    Basic values
      & b    &::= & \unit                & – unit \\
      &      &\mid& \tuple{v_1, v_2}     & – pair value \\
      &      &\mid& [\ ]_\beta           & – nil \\
      &      &\mid& v_1 :: v_2           & – cons value \\
      &      &\mid& c                    & – constant \\
  \end{grammar}
}

\newmacro{G-Tasks}{
  \begin{grammar}
    Tasks
      & t    &::= & \Enter \beta         & – unvalued editor \\
      &      &\mid& \Update b            & – valued editor \\
      &      &\mid& \View b              & – valued read-only editor \\
      &      &\mid& \Pick \set{\more{L_i \mapsto t_i}}  & – user choice \\
    \addlinespace
      &      &\mid& t_1 \Pair t_2        & – pairing \\
      &      &\mid& \Done v              & – internal value \\
      &      &\mid& t_1 \Choose t_2      & – choice \\
      &      &\mid& \Fail                & – fail task \\
    \addlinespace
      &      &\mid& e_1 \Trans t_2       & – transform \\
      &      &\mid& t_1 \Step e_2        & – step \\
      &      &\mid& \Forever t           & – forever running task \\
    \addlinespace
      &      &\mid& \Change l            & – shared editor \\
      &      &\mid& \Watch l             & – shared read-only editor \\
  \end{grammar}
}

\newmacro{G-Inputs}{
  \begin{grammar}
    Inputs
      & i    & ::=& b                    & – enter basic value \\
      &      &\mid& \IContinue L         & – continue with label \\
      &      &\mid& \IPick L             & – pick label \\
      &      &\mid& \First i             & – pass to first \\
      &      &\mid& \Second i            & – pass to second \\
  \end{grammar}
}

\newmacro{G-Predicates}{
  \begin{grammar}
    Predicates
      & \phi &::= & c                      & – constant \\
      &      &\mid& s                      & – symbol \\
      &      &\mid& \unit                  & – unit \\
      &      &\mid& \tuple{\phi_1, \phi_2} & – pairs \\
      &      &\mid& [\ ]_\beta             & – nil \\
      &      &\mid& \phi_1 :: \phi2        & – cons \\
      &      &\mid& u\ \phi                & – symbolic unary operation \\
      &      &\mid& \phi_1\ o\ \phi_2      & – symbolic binary operation \\
  \end{grammar}
}
