% !TEX root=../main.tex

\section{Grammar}

\subsection{Types}

\usemacro{G-Types}


\subsection{Expressions}

\usemacro{G-Expressions}


\subsection{Values}

\usemacro{G-Values}


\subsection{Matches}

\usemacro{G-Matches}


\subsection{Tasks}

\usemacro{G-Pretasks}
\usemacro{G-Tasks}


\subsection{Inputs}

\usemacro{G-Inputs}


\subsection{Derived forms}

\usemacro{G-Derived}


\subsection{Statements}

\usemacro{G-Restricted}


\subsection{Extensions}

\subsubsection{Types}
\usemacro{G-E-Types}

\subsubsection{Expressions}
\usemacro{G-E-Expressions}
\usemacro{G-E-Operations}

\subsubsection{Values}
\usemacro{G-E-Values}

\subsubsection{Inputs}
\usemacro{G-E-Inputs}

\subsubsection{Predicates}
\usemacro{G-E-Predicates}



\newpage
\section{Rules}

\subsection{Typing rules}

\begin{gather*}
  \boxed{\RelationT}    \Break
  \userule{T-Bool}      \Quad
  \userule{T-Int}       \Quad
  \userule{T-String}    \Quad
  \userule{T-Unit}      \Break
  \userule{T-Var}       \Quad
  \userule{T-Abs}       \Quad
  \userule{T-App}       \Break
  \userule{T-Sym}       \Quad
  \userule{T-Loc}       \Quad
  \userule{T-If}        \Break
  \userule{T-Tuple}     \Quad
  \userule{T-First}     \Quad
  \userule{T-Second}    \Break
  \userule{T-Nil}       \Quad
  \userule{T-Cons}      \Quad
  \userule{T-Head}      \Quad
  \userule{T-Tail}      \Break
                        \Break
  \userule{T-Enter}     \Quad
  \userule{T-Update}    \Quad
  \userule{T-View}      \Quad
  \userule{T-Done}      \Break
  \userule{T-Pair}      \Quad
  \userule{T-Choose}    \Quad
  \userule{T-Fail}      \Break
  \userule{T-Trans}     \Quad
  \userule{T-Step}      \Break
  \userule{T-Pick}      \Quad
  \userule{T-Forever}   \Quad
  \userule{T-New}       \Break
  \userule{T-Assign}    \Quad
  \userule{T-Change}    \Quad
  \userule{T-Watch}
\end{gather*}


\subsection{Matching rules}

\begin{gather*}
  \boxed{\RelationM}    \Break
  \userule{M-Ignore}    \Quad
  \userule{M-Capture}   \Quad
  \userule{M-Pair}      \Quad
  \userule{M-Unit}
\end{gather*}


\subsection{Translation rules}

\usemacro{U-Statements}

\usemacro{U-Restricted}


\subsection{Evaluation rules}

\begin{gather*}
  \boxed{\RelationE}  \Break
  \userule{E-Value}   \Quad
  \userule{E-App}     \Break
  \userule{E-IfTrue}  \Quad
  \userule{E-IfFalse} \Break
  \userule{E-Tuple}   \Quad
  \userule{E-First}   \Quad
  \userule{E-Second}  \Break
  \userule{E-Cons}    \Quad
  \userule{E-Head}    \Quad
  \userule{E-Tail}    \Break
                      \Break
  \userule{E-Enter}   \Quad
  \userule{E-Update}  \Quad
  \userule{E-View}    \Quad
  \userule{E-Pick}    \Break
  \userule{E-Trans}   \Quad
  \userule{E-Step}    \Quad
  \userule{E-Forever} \Break
  \userule{E-Done}    \Quad
  \userule{E-Pair}    \Quad
  \userule{E-Choose}  \Break
  \userule{E-New}     \Quad
  \userule{E-Assign}  \Quad
  \userule{E-Change}  \Quad
  \userule{E-Watch}
\end{gather*}


\subsection{Normalisation rules}

\begin{gather*}
  \boxed{\RelationN}      \Break
  \userule{N-StepNone}    \Break
  \userule{N-StepFail}    \Break
  \userule{N-StepWait}    \Break
  \userule{N-StepCont}    \Break
                          \Break
  \userule{N-ChooseLeft}  \Break
  \userule{N-ChooseRight} \Break
  \userule{N-ChooseNone}  \Break
                          \Break
	\userule{N-Trans}       \Quad
  \userule{N-Forever}     \Quad
	\userule{N-Pair}        \Break
	\userule{N-New}         \Quad
	\userule{N-Assign}      \Break
                          \Break
  \userule{N-Done}        \Quad
  \userule{N-Enter}       \Quad
  \userule{N-Update}      \Quad
  \userule{N-View}        \Break
  \userule{N-Pick}        \Quad
  \userule{N-Change}      \Quad
  \userule{N-Watch}       \Quad
  \userule{N-Fail}
\end{gather*}


\subsection{Handling rules}

\begin{gather*}
  \boxed{\RelationH}       \Break
  \userule{H-Enter}        \Break
  \userule{H-Update}       \Quad
  \userule{H-Change}       \Break
  \userule{H-Pick}         \Quad
  \userule{H-Cont}         \Break
                           \Break
  \userule{H-Trans}        \Quad
  \userule{H-Step}         \Quad
  \userule{H-Forever}      \Break
                           \Break
  \userule{H-PairFirst}    \Quad
  \userule{H-PairSecond}   \Break
  \userule{H-ChooseFirst}  \Quad
  \userule{H-ChooseSecond}
\end{gather*}

\bigskip


\subsection{Fixing rules}

\begin{gather*}
  \boxed{\RelationF} \Break
  \userule{F-Done}   \Quad
  \userule{F-Loop}
\end{gather*}

\bigskip


\subsection{Interaction rules}

\begin{gather*}
  \boxed{\RelationI} \Break
  \userule{I-Handle}
\end{gather*}


\subsection{Symbolic rules}

\begin{gather*}
  \boxed{\RelationX} \Break
  \boxed{\RelationS}
\end{gather*}

\fixme{Add transitions for symbolc equivalents of handling and interaction.}


\section{Observations}

\subsection{Value}

\usemacro{O-Value}


\subsection{Failing}

\usemacro{O-Failing}


\subsection{Watching}

\usemacro{O-Watching}


\subsection{Picks}

\usemacro{O-Picks}


\subsection{Inputs}

\usemacro{O-Inputs}

\fixme{Is normalisation of $t_2$ needed in the case of step?}


\subsection{Hints}

\usemacro{O-Hints}
