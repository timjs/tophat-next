% !TEX root=../main.tex

\section{Laws}

\subsection{Transforming (functor)}

\begin{equation*}
  \begin{array}{rclr}
    \Identity \Trans t
      &\cong& t
      & \text{(identity)} \\
    (e_1 \circ e_2) \Trans t
      &\cong& e_1 \Trans\ (e_2 \Trans t)
      & \text{(composition)} \\
  \end{array}
\end{equation*}


\subsection{Pairing (applicative/monoidal functor)}

\begin{equation*}
  \begin{array}{rclr}
    \Done \unit \Pair t
      &\cong& t
      & \text{(left identity)} \\
    t \Pair \Done \unit
      &\cong& t
      & \text{(right identity)} \\
    \Assoc \Trans t_1 \Pair\ (t_2 \Pair t_3)
      &\cong& (t_1 \Pair t_2) \Pair t_3
      & \text{(associativity)} \\
    (\lambda \tuple{x_1, x_2}. \tuple{e_1\ x_1, e_2\ x_2}) \Trans\ (t_1 \Pair t_2)
      &\cong& (e_1 \Trans t_1) \Pair\ (e_2 \Trans t_2)
      & \text{(naturality)} \\
  \end{array}
\end{equation*}


\subsection{Choosing}

\begin{equation*}
  \begin{array}{rclr}
    t_1 \Choose\ (t_2 \Choose t_3)
      &\cong& (t_1 \Choose t_2)\ \Choose t_3
      & \text{(associativity)} \\
    \Done e \Choose t
      &\cong& \Done e
      & \text{(left catch)} \\
    t \Choose \Done e
      &\not\cong& \Done e
      & \text{(right catch)} \\
    & & & \\
    e \Trans\ (t_1 \Choose t_2)
      &\cong& (e \Trans t_1)\ \Choose\ (e \Trans t_2)
      & \text{(distributivity)} \\
    & & & \\
    t_0 \Pair\ (t_1 \Choose t_2)
      &\not\cong& (t_0 \Choose t_1) \Pair\ (t_0 \Choose t_2)
      & \text{(left pair distributivity)} \\
    (t_1 \Choose t_2) \Pair t_0
      &\not\cong& (t_1 \Choose t_0) \Pair\ (t_2 \Choose t_0)
      & \text{(right pair distributivity)} \\
    & & & \\
    t_0 \Step \lambda x. (t_1 \Choose t_2)
      &\cong& (t_0 \Step \lambda x. t_1)\ \Choose\ (t_0 \Step \lambda x. t_2)
      & \text{(left step distributivity)} \\
    (t_1 \Choose t_2)\ \Step e
      &\cong& (t_1 \Step e) \Choose\ (t_2 \Step e)
      & \text{(right step distributivity)} \\
  \end{array}
\end{equation*}

\subsection{Failing}

\begin{equation*}
  \begin{array}{rclr}
    \Fail \Choose t
      &\cong& t
      & \text{(left identity)} \\
    t \Choose \Fail
      &\cong& t
      & \text{(right identity)} \\
    & & & \\
    e \Trans \Fail
      &\cong& \Fail
      & \text{(annihilation)} \\
    & & & \\
    \Fail \Pair t
      &\not\cong& \Fail
      & \text{(left pair annihilation)} \\
    t \Pair \Fail
      &\not\cong& \Fail
      & \text{(right pair annihilation)} \\
    & & & \\
    \Fail \Step e
      &\cong& \Fail
      & \text{(left step annihilation)} \\
    t \Step \lambda x. \Fail
      &\not\cong& \Fail
      & \text{(right step annihilation)} \\
  \end{array}
\end{equation*}


\subsection{Stepping (monad)}

\begin{equation*}
  \begin{array}{rclr}
    \Done x \Step g
      &\cong& g\ x
      & \text{(left identity)} \\
    t \Step\ (\lambda y. \Done y)
      &\cong& t
      & \text{(right identity)} \\
    (t \Step g) \Step h
      &\cong& t \Step\ (\lambda y. g\ y \Step h)
      & \text{(associativity)}
  \end{array}
\end{equation*}
