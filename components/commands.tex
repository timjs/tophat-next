% !TEX root=../main.tex



\let\phi\varphi

%% Host language %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\newkeyword[IF]  {if}
\newkeyword[THEN]{then}
\newkeyword[ELSE]{else}

\newkeyword[LET]{let}
\newkeyword[IN]{in}

\newmacro{If}[3]
  {\IF #1 \THEN #2 \ELSE #3}
\newmacro{Let}[2]
  {\LET #1 \IN #2}



%% Values %%


\newmathcommand{unit}{\<\>}


\newvalue{True}
\newvalue{False}
\newvalue[Not]{not}


\newmacro{str}[1]
  {\text{``#1''}}

\newvalue[Identity]{id}
\newvalue[Map]{map}
\newvalue[Fst]{fst}
\newvalue[Snd]{snd}
\newvalue[Head]{head}
\newvalue[Tail]{tail}
\newvalue[Uniq]{uniq}
\newvalue[Len]{len}
\newvalue[Assoc]{assoc}



%% Types %%


\newtype{Void}
\newtype{Unit}%{\ensuremath{\<\>}}
\newtype{Bool}
\newtype{Nat}
\newtype{Int}
\newtype{String}
\newtype{Label}
\newtype[Reference]{Ref}
\newtype{Task}
\newtype{Maybe}
\newtype{List}

\newtype{Euro}



%% Object language %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\newmacro{TOPHAT}
  {$\widehat{\text{\smallcaps{top}}}$\xspace}

\newmacro{Unique}
  {\ensuremath{^n}}

\let\And\relax
\newoperator{Enter} {\boxtimes\Unique}
\newoperator{Update}{\square\Unique}
\newoperator{View}  {\square\kern-1.32ex\circ} %{\ocircle} %{\boxcircle} %{\overline{\square}}

\newoperator{Pair}  {\raisebox{0.05ex}{\scalebox{0.9}{$\blacktriangleright\!\!\blacktriangleleft$}}}
\newoperator{Done}  {\blacksquare}
\newoperator{Choose}{\raisebox{0.05ex}{\scalebox{0.9}{$\blacktriangleleft\kern-0.42ex\blacktriangleright$}}}
\newoperator{Fail}  {\lightning}

\newoperator{Trans}  {\bullet}
\newoperator{Step}   {\blacktriangleright}
\newoperator{Gets}   {\blacktriangleleft}
\newoperator{Forever}{\circlearrowleft}

\newkeyword[New]{new}
\newoperator{Assign}{:=}
\newoperator{Change}{\boxplus\Unique}
\newoperator{Watch} {\boxplus\kern-1.32ex\circ} %{\oplus} %{\dot{\boxplus}} %{\boxbox} %{\overline{\boxplus}}

\newoperator{Appoint}{@}

\newoperator{Pick}  {\lozenge\Unique}
\newoperator{When}  {\blacklozenge}


%% Events %%

\newvalue[IEnter]   {E\Unique}
\newvalue[IContinue]{C\Unique}
\newvalue[IPick]    {P\Unique}



%% Semantic functions %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\newmathcommand{eval}[rel]
  {\;\downarrow\;}
\newmathcommand{stride}[rel]
  % {\;\rightarrow\!\shortmid\;}
  {\;\rightsquigarrow\;}
\newmathcommand{normalise}[rel]
  {\;\Downarrow\;}
\newmacro{handle}[1]
  {\;\xrightarrow{#1}\;}
  % {\;\overset{#1}{\rightarrow}\;}
\newmathcommand{fix}[rel]
  % {\;\Updownarrow\;}
  {\;\rotatebox[origin=c]{-90}{$\Mapsto$}\;}
\newmacro{interact}[1]
  {\;\xRightarrow{#1}\;}
  % {\;\overset{#1}{\Rightarrow}\;}
\newmathcommand{extract}[rel]
  % {\;\underset{#1}{\leadsto}\;}
  {\;\leadsto\;}
\newmathcommand{simulate}[rel]
  % {\;\leadsto\makebox[0pt]{\raisebox{+0.5ex}{$\leadsto$}}\;}
  % {\;\underset{#1}{\raisebox{-0.25ex}{$\leadsto$}\mathllap{\raisebox{+0.25ex}{$\leadsto$}}}\;}
  % {\;\mathrel{\raisebox{-0.25ex}{$\leadsto$}\mathllap{\raisebox{+0.25ex}{$\leadsto$}}}\;}
  {\;\raisebox{-0.25ex}{$\leadsto$}\mathllap{\raisebox{+0.25ex}{$\leadsto$}}^*\;}
  % {\;\raisebox{-0.4ex}{$\leadsto$}\mathllap{\raisebox{+0.4ex}{$\leadsto$}}\kern-0.4ex\circ
  % \approx\!\!>\!\!\circ\;}
  % {\;\bullet\!\!\!\Rightarrow\;\wr\!\!\!\Rightarrow\;}
  % {\;\Longmapsto\;}
  % {\;\wr\!\!\!\Rightarrow\;}


\newmathcommand{Simulate}[it]
  {simulate}
\newmathcommand{Again}[it]
  {again}

\newmathcommand{Value}[cal]
  {V}
\newmathcommand{Inputs}[cal]
  {I}
\newmathcommand{Interface}[cal]
  {U}
\newmathcommand{Failing}[cal]
  {F}
\newmathcommand{Watching}[cal]
  {W}
\newmathcommand{Picks}[cal]
  {P}
\newmathcommand{UserInterface}[cal]
  {U}
\newmathcommand{Sat}[cal]
  {S}
\newmathcommand{Hints}[cal]
  {H}



%% Proofs %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


% \newcommand{\case}[2]{
%     \noindent\textbf{Case} #1\\
%     \vspace{5mm}
%     \indent\begin{minipage}{\dimexpr\textwidth-3cm}
%     #2
%   \end{minipage}\\\\}

\newcommand{\case}[2]{
  \bigskip
  \noindent\textbf{Case} #1
  \nopagebreak[4]
  \smallskip
  \par
  \begingroup
    \leftskip\parindent
    \noindent
    #2
    \par
  \endgroup
}

% \newcommand{\case}[2]{
%   \noindent
%   \begin{tabular*}{\textwidth}{lp{0.8\textwidth}}
%     \textbf{Case} & #1 \\
%     \addlinespace
%     & #2
%   \end{tabular*}
%   \medskip
% }



%% Depricated %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
